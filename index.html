<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>糖糖Π的导航</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        background-color: #f0f0f0;
        color: #333;
        text-align: center;
    }
    header {
        background: linear-gradient(to right, #f0f0f0, #e0e0e0);
        padding: 20px 0;
    }
    h1, h2, h3 {
        color: #333;
    }
    h2 {
        font-style: italic;
        font-size: 18px;
        text-align: right;
    }
    main {
        background-color: #f0f0f0;
        padding: 20px;
    }
    footer {
        padding: 20px 0;
    }
    ul {
        list-style-type: none;
        padding: 0;
    }
    a {
        text-decoration: none;
        color: #333;
    }
    a:hover {
        text-decoration: underline;
    }
    .link {
        display: inline-block;
        width: 150px;
        text-align: left;
        margin: 5px;
    }
    table {
        width: 50%;
        margin: 0 auto;
    }
    .search-suggestions {
        position: absolute;
        width: 50%;
        background-color: #f0f0f0;
        color: #333;
        list-style-type: none;
        padding: 0;
        margin: 0;
        display: none;
    }
    .search-suggestions a {
        display: block;
        padding: 5px;
        text-decoration: none;
    }
    .search-suggestions a:hover {
        background-color: #e0e0e0;
    }
    .loading {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.8) url('https://fastly.jsdelivr.net/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/loading.gif') no-repeat center center;
    }
</style>
</head>
<body>

<div class="loading"></div>

<header>
    <div id="datetime"></div>
    <h1>糖糖Π的导航</h1>
    <h2>——热衷于分享安全，无毒，无后门，可靠可用的各类资源。</h2>
    <input type="text" id="search-box" placeholder="搜索" style="width: 50%;">
    <ul id="search-suggestions" class="search-suggestions"></ul>
</header>

<main id="main-content">
    <!-- Links will be loaded here dynamically -->
</main>

<footer>
    <p>Copyright © 2024 刘小龙</p>
</footer>

<script src="https://fastly.jsdelivr.net/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/js/jquery_v3_20240731181942.js"></script>
<script src="https://fastly.jsdelivr.net/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/js/displayHitokoto_20240731181957.js"></script>
<script>
$(document).ready(function() {
    function updateDateTime() {
        var now = new Date();
        var datetimeStr = now.getFullYear() + '年' + 
                          (now.getMonth() + 1).toString().padStart(2, '0') + '月' + 
                          now.getDate().toString().padStart(2, '0') + '日 ' + 
                          now.getHours().toString().padStart(2, '0') + '时' + 
                          now.getMinutes().toString().padStart(2, '0') + '分' + 
                          now.getSeconds().toString().padStart(2, '0') + '秒 星期' + 
                          ['日', '一', '二', '三', '四', '五', '六'][now.getDay()];
        $('#datetime').text(datetimeStr);
    }
    updateDateTime();
    setInterval(updateDateTime, 1000);

    function generateRandomColor() {
        return '#' + Math.floor(Math.random()*16777215).toString(16);
    }

    function displayLinks(data) {
        var mainContent = $('#main-content');
        data.forEach(function(category) {
            var categoryDiv = $('<div></div>').css('text-align', 'center');
            var h3 = $('<h3></h3>').text(category.name).css('color', generateRandomColor());
            categoryDiv.append(h3);
            var table = $('<table></table>');
            category.links.forEach(function(link, index) {
                if (index % 4 === 0) {
                    table.append($('<tr></tr>'));
                }
                var td = $('<td></td>').addClass('link');
                var a = $('<a></a>').attr('href', link.url).attr('target', '_blank').text(link.name);
                td.append(a);
                table.find('tr:last').append(td);
            });
            categoryDiv.append(table);
            mainContent.append(categoryDiv);
        });
    }

    function searchLinks(query) {
        if (!query) {
            return [];
        }
        var results = [];
        data.forEach(function(category) {
            category.links.forEach(function(link) {
                if (link.name.toLowerCase().includes(query.toLowerCase())) {
                    results.push({ name: link.name, url: link.url });
                }
            });
        });
        return results;
    }

    function displaySearchSuggestions(results) {
        var suggestions = $('#search-suggestions');
        suggestions.empty();
        if (results.length === 0) {
            suggestions.append($('<li></li>').text('没有找到与之相匹配的结果！'));
        } else {
            results.forEach(function(result) {
                var li = $('<li></li>');
                var a = $('<a></a>').attr('href', result.url).attr('target', '_blank').text(result.name);
                li.append(a);
                suggestions.append(li);
            });
        }
        suggestions.show();
    }

    $('#search-box').on('input', function() {
        var query = $(this).val();
        var results = searchLinks(query);
        displaySearchSuggestions(results);
    });

    $(document).on('click', function(e) {
        if (!$(e.target).closest('#search-box').length) {
            $('#search-suggestions').hide();
        }
    });

    $.ajax({
        url: 'https://fastly.jsdelivr.net/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/json/links_20240729095108.json',
        beforeSend: function() {
            $('.loading').show();
        },
        success: function(jsonData) {
            data = jsonData;
            displayLinks(data);
        },
        complete: function() {
            $('.loading').hide();
        },
        error: function() {
            alert('加载JSON数据失败！');
        }
    });
});
</script>
</body>
</html>
