<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />

		<title>å°é¾™ğŸ‰çš„èµ„æºç«™</title>

		<link href="https://fastly.jsdelivr.net/npm/layui@2.9.18/dist/css/layui.min.css" rel="stylesheet">

		<style>
			:root {
				--main-font-family: "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Heiti SC", "Microsoft YaHei", "WenQuanYi Micro Hei", sans-serif;
			}

			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				cursor: url('https://fastly.jsdelivr.net/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/tupian/cursor.cur'), default;
				font-family: var(--main-font-family);
				background-color: #eee;
			}

			.layui-layer-content a {
				display: block;
				padding: 5px 20px 5px 20px;
				/* ä¸Šè¾¹ | å³è¾¹ | ä¸‹è¾¹ | å·¦è¾¹ */
			}

			/* è¡¨æ ¼å†…å®¹å±…ä¸­ */
			.layui-table th,
			.layui-table td {
				font-size: 18px;
				text-align: center;
				/* æ°´å¹³å±…ä¸­ */
				vertical-align: middle;
				/* å‚ç›´å±…ä¸­ */
			}
		</style>
	</head>
	
	<body class="layui-layout-body layui-unselect" oncontextmenu=self.event.returnValue=false
		onselectstart="return false">
		<div class="layui-container">
			<div class="layui-text">
				<h1 id="timeDateWeek"></h1>
				<h1>å°é¾™ğŸ‰çš„èµ„æºç«™</h1>
				<span class="typing layui-font-24 layui-font-black"></span>
				<h3 id="hitokoto_text">Hitokotoä¸€è¨€è·å–ä¸­ï¼Œè¯·ç¨å...</h3>
				<h4>ç½‘ç«™æ•°æ®æœ€åç»´æŠ¤æ—¶é—´ï¼š2024-09-17 12:14:39</h4>
			</div>

			<h3>èµ„æºè¡¨ï¼š</h3>
			<div id="linkCount"></div>
			<table class="layui-hide" id="linkTable" lay-filter="linkTable"></table>

			<h3>ç³»ç»Ÿé•œåƒè¡¨ï¼š</h3>
			<p>å¦‚ä½•ä¸‹è½½ï¼Ÿå¤åˆ¶ED2Kæˆ–è€…BTé“¾æ¥ï¼Œå»ºè®®ä½¿ç”¨ä¸“ç”¨ä¸‹è½½å·¥å…·ä¸‹è½½ã€‚ä¸‹è½½é€Ÿåº¦ä»…ä¸æ‚¨çš„å®½å¸¦ç¯å¢ƒå’Œå·¥å…·æœ‰å…³ã€‚æåŠ©ä¸å¦ç”±æ‚¨è‡ªç”±é€‰æ‹©ã€‚</p>
			<div id="tableContainer"></div>
			
			<div style="margin-top: 10px; text-align: center; margin-bottom: 10px;">
				<p style=" font-weight: 300;">ä¸ºğŸ’—å‘ç”µï¼Œç”¨å¿ƒåšæŒï¼Œæ¬¢è¿è¯·Taå–ä¸€æ¯çˆ±ğŸ’—å’–å•¡ï¼</p>
				<button id="rewardBtn" type="button" class="layui-btn layui-btn-warm" style="margin-top: 10px;">â˜•
					ï¿¥èµèµ</button>
				<div id="rewardLayer" style="display:none;">
					<img id="rewardImage"
						src="https://fastly.jsdelivr.net/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/tupian/wei-xin-zan-shang.png"
						alt="èµèµç " style="width: 300px; height: 300px;">
				</div>
			</div>
			<div class="layui-text" style="text-align: center;">
				<span>Copyright Â© 2024 åˆ˜å°é¾™</span><br />
				<span>ç½‘ç«™æ‰˜ç®¡æä¾›å•† <a target="_blank" href="https://pages.github.com/">GitHub Pages</a> & <a target="_blank"
						href="https://github.com/">GitHub</a></span><br />
				<span id="uptime"></span>
				<div>
					<span class="social-value">å¯Œå¼º</span>
					<span class="social-value">æ°‘ä¸»</span>
					<span class="social-value">æ–‡æ˜</span>
					<span class="social-value">å’Œè°</span>
					<span>â €|â €</span>
					<span class="social-value">è‡ªç”±</span>
					<span class="social-value">å¹³ç­‰</span>
					<span class="social-value">å…¬æ­£</span>
					<span class="social-value">æ³•æ²»</span>
					<span>â €|â €</span>
					<span class="social-value">çˆ±å›½</span>
					<span class="social-value">æ•¬ä¸š</span>
					<span class="social-value">è¯šä¿¡</span>
					<span class="social-value">å‹å–„</span>
				</div>
			</div>
		</div>

		<script src="https://fastly.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
		<script src="https://fastly.jsdelivr.net/npm/layui@2.9.18/dist/layui.min.js"></script>
		<script src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>
		
		<script>
			// åŠ¨æ€ç”Ÿæˆ èµ„æº å†…å®¹
			layui.use(['util', 'table', 'layer', 'jquery'], function() {
				var util = layui.util;
				var table = layui.table;
				var layer = layui.layer;
				var $ = layui.jquery;



				var dataCache = [];
				var totalLinks = 0;



				// æ˜¾ç¤ºåŠ è½½å±‚
				var loadingIndex = layer.msg('ç©å‘½åŠ è½½ä¸­...', {
					icon: 16,
					shade: [0.5, '#fff']
				});



				// å¼‚æ­¥è·å–æ•°æ®
				fetch(
						'https://fastly.jsdelivr.net/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/json/links_20240915104251.json'
					)
					.then(response => response.json())
					.then(json => {
						dataCache = json;
						totalLinks = json.reduce((acc, category) => acc + category.links.length, 0);
						$('#linkCount').html(
							`<p style="font-size: 16px;">å…± <b style="color: red;">${json.length}</b> ä¸ªåˆ†ç±»ï¼Œ<b style="color: red;">${totalLinks}</b> æ¡é“¾æ¥èµ„æºã€‚</p>`
						);
						renderTable();
						layer.close(loadingIndex);
						layer.msg('æ•°æ®åŠ è½½æˆåŠŸï¼', {
							icon: 1
						});
					})
					.catch(error => {
						console.error('Error fetching data:', error);
						layer.close(loadingIndex);
						layer.msg('æ•°æ®åŠ è½½å¤±è´¥', {
							icon: 2
						});
					});



				// æ¸²æŸ“è¡¨æ ¼
				function renderTable() {
					table.render({
						elem: '#linkTable',
						cols: [
							[{
									field: 'name',
									title: 'åˆ†ç±»åç§°'
								},
								{
									field: 'linkCount',
									title: 'é“¾æ¥æ•°é‡'
								},
								{
									title: 'æ“ä½œ',
									toolbar: '#linkToolbar'
								}
							]
						],
						data: dataCache.map(category => ({
							name: category.name,
							linkCount: category.links.length
						})),
						page: true
					});
				}



				// åˆ›å»ºé“¾æ¥HTML
				function createLinksHtml(links) {
					return links.sort((a, b) => a.name.localeCompare(b.name))
						.map(link => `<a href="${link.url}" target="_blank">${link.name}</a>`).join('<br>');
				}



				// ç›‘å¬è¡¨æ ¼å·¥å…·æ¡
				table.on('tool(linkTable)', function(obj) {
					var category = dataCache.find(d => d.name === obj.data.name);
					var linksHtml = createLinksHtml(category.links);

					var linkTittle = `${category.name}`;

					layer.open({
						type: 1,
						title: linkTittle,
						closeBtn: 0, // ä¸æ˜¾ç¤ºå…³é—­æŒ‰é’®
						area: ['50%', '50%'],
						anim: 1,
						btn: ['å…³é—­çª—å£'],
						content: `<div class="layui-layer-content">${linksHtml}</div>`
					});
				});



				// å›ºå®šæ¡
				util.fixbar({
					bars: [{
						type: 'å»é¡¶éƒ¨',
						icon: 'layui-icon-up'
					}, {
						type: 'å…¬å‘Š',
						icon: 'layui-icon-about'
					}, {
						type: 'æœç´¢',
						icon: 'layui-icon-search'
					}, {
						type: 'è”ç³»å®¢æœ',
						icon: 'layui-icon-service'
					}, {
						type: 'åˆ·æ–°é¡µé¢',
						icon: 'layui-icon-refresh-3'
					}, {
						type: 'å»åº•éƒ¨',
						icon: 'layui-icon-down'
					}],
					default: false,
					css: {
						right: 16,
						bottom: 16
					},
					bgcolor: '#393D52',
					on: {
						mouseenter: function(type) {
							layer.tips(type, this, {
								tips: 4,
								fixed: true
							});
						},
						mouseleave: function(type) {
							layer.closeAll('tips');
						}
					},
					click: function(type) {
						switch (type) {
							case 'å»é¡¶éƒ¨':
								window.scrollTo({
									top: 0,
									behavior: 'smooth'
								});
								layer.msg('å°ä¸»ï¼Œå·²ç»åˆ°é¡¶éƒ¨å•¦(âœ¿â— â€¿â— )ï¼', {
									icon: 1
								});
								break;
							case 'å…¬å‘Š':
								// ä½¿ç”¨fetch APIè·å–å…¬å‘Šå†…å®¹
								fetch(
										'https://fastly.jsdelivr.net/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/json/notice.json'
									)
									.then(response => {
										// ç¡®ä¿å“åº”æˆåŠŸ
										if (!response.ok) {
											throw new Error('Network response was not ok');
										}
										return response.json(); // è§£æJSON
									})
									.then(notices => {
										// å°†å…¬å‘Šå†…å®¹æ‹¼æ¥æˆHTMLå­—ç¬¦ä¸²ï¼Œå¹¶æ·»åŠ åºå·å’Œè¡Œé—´è·
										let contentHtml = '<ol>';
										notices.forEach(function(notice, index) {
											// åˆ›å»ºä¸­æ–‡åºå·
											let chineseNumber = ['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­',
												'ä¸ƒ', 'å…«', 'ä¹',
												'å'
											];
											let chineseIndex = chineseNumber[index] + 'ã€';
											// æ·»åŠ å…¬å‘Šå†…å®¹ï¼Œå¹¶åœ¨æ¯æ¡å…¬å‘Šåæ·»åŠ ä¸€ä¸ªé¢å¤–çš„<br>æ ‡ç­¾æ¥åˆ›å»ºè¡Œé—´è·
											contentHtml +=
												`<li>${chineseIndex}${notice}</li><br>`;
										});
										contentHtml += '</ol>';

										// æ˜¾ç¤ºå…¬å‘Šå†…å®¹
										layer.open({
											type: 1,
											title: "å…¬å‘Š",
											closeBtn: 0, // ä¸æ˜¾ç¤ºå…³é—­æŒ‰é’®
											content: `<div style="padding: 20px;">${contentHtml}</div>`,
											area: ['600px', '400px'],
											btn: ['å…³é—­çª—å£']
										});
									})
									.catch(error => {
										// å¤„ç†é”™è¯¯æƒ…å†µ
										console.error(
											'There has been a problem with your fetch operation:',
											error);
										layer.msg('æ— æ³•åŠ è½½å…¬å‘Šå†…å®¹ï¼Œè¯·ç¨åå†è¯•ã€‚', {
											icon: 2
										});
									});
								break;
							case 'æœç´¢':
								layer.prompt({
									type: 1,
									title: "è¯·è¾“å…¥æœç´¢å…³é”®è¯",
									closeBtn: 0, // ä¸æ˜¾ç¤ºå…³é—­æŒ‰é’®
									anim: 4 // ä»å·¦ç¿»æ»š
								}, function(keyword, index) {
									keyword = keyword.trim().toLowerCase();
									if (!keyword) {
										layer.msg('è¯·è¾“å…¥å…³é”®è¯', {
											icon: 0,
											anim: 6
										});
										return;
									}
									var results = [];
									dataCache.forEach(category => {
										category.links.forEach(link => {
											if (link.name.toLowerCase().includes(
													keyword)) {
												results.push(link);
											}
										});
									});
									if (results.length === 0) {
										layer.msg('æ²¡æœ‰æ‰¾åˆ°ç›¸å…³èµ„æºï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯ï¼', {
											icon: 0
										});
									} else {
										var sortedResultsHtml = createLinksHtml(results);
										layer.open({
											type: 1,
											title: "æœç´¢ç»“æœ",
											closeBtn: 0, // ä¸æ˜¾ç¤ºå…³é—­æŒ‰é’®
											area: ['50%', '50%'],
											btn: ['å…³é—­çª—å£'],
											anim: 2,
											content: `<div class="layui-layer-content">${sortedResultsHtml}</div>`
										});
									}
									layer.close(index);
								});
								break;
							case 'è”ç³»å®¢æœ':
								window.open('http://wpa.qq.com/msgrd?v=3&uin=2539223617&site=qq&menu=yes');
								break;
							case 'åˆ·æ–°é¡µé¢':
								window.location.reload(true);
								layer.msg('å°ä¸»ï¼Œå·²ç»ä¸ºæ‚¨åˆ·æ–°äº†é¡µé¢(âœ¿â— â€¿â— )ï¼', {
									icon: 1
								});
								break;
							case 'å»åº•éƒ¨':
								window.scrollTo({
									top: document.body.scrollHeight - window.innerHeight,
									behavior: 'smooth'
								});
								layer.msg('å°ä¸»ï¼Œå·²ç»åˆ°åº•éƒ¨å•¦(âœ¿â— â€¿â— )ï¼', {
									icon: 1
								});
								break;
							default:
								console.log(this, type);
						}
					}
				});



				// ç‚¹å‡»æŒ‰é’®å¼¹å‡ºèµèµç 
				document.getElementById('rewardBtn').onclick = function() {
					layer.open({
						type: 1, // é¡µå±‚ç±»å‹
						anim: 3,
						title: false, // ä¸æ˜¾ç¤ºæ ‡é¢˜æ 
						closeBtn: 0, // ä¸æ˜¾ç¤ºå…³é—­æŒ‰é’®
						shadeClose: true, // ç‚¹å‡»é®ç½©å…³é—­å±‚
						area: 'auto', // å®½é«˜è‡ªåŠ¨
						content: $('#rewardLayer') // å¼¹å‡ºå±‚å†…å®¹
					});
				}
			});
		</script>



		<script type="text/html" id="linkToolbar">
			<a class="layui-btn layui-btn-sm layui-btn-normal" lay-event="viewLinks">æŸ¥çœ‹é“¾æ¥</a>
		</script>



		<script>
			// æ—¶é—´ï¼Œæ—¥æœŸï¼Œæ˜ŸæœŸ
			function updateTime() {
				const now = new Date();
				const year = now.getFullYear();
				const month = now.getMonth() + 1;
				const day = now.getDate();
				const hour = now.getHours();
				const minute = now.getMinutes();
				const second = now.getSeconds();
				const week = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'][now.getDay()];
				$('#timeDateWeek').text(
					`${year}å¹´${month.toString().padStart(2, '0')}æœˆ${day.toString().padStart(2, '0')}æ—¥â €${hour.toString().padStart(2, '0')}æ—¶${minute.toString().padStart(2, '0')}åˆ†${second.toString().padStart(2, '0')}ç§’â €æ˜ŸæœŸ${week}`
				);
			}
			// æ¯ç§’æ›´æ–°æ—¶é—´
			setInterval(updateTime, 1000);
			// åˆå§‹æ—¶ä¹Ÿæ›´æ–°ä¸€æ¬¡æ—¶é—´
			updateTime();



			//éšæœºé¢œè‰²
			function getRandomColor() {
				var letters = '0123456789ABCDEF';
				var color = '#';
				for (var i = 0; i < 6; i++) {
					color += letters[Math.floor(Math.random() * 16)];
				}
				return color;
			}



			// ä»·å€¼è§‚æ˜¾ç¤º
			function applyRandomColors() {
				var values = document.getElementsByClassName('social-value');
				for (var i = 0; i < values.length; i++) {
					values[i].style.color = getRandomColor();
				}
			}

			// è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯ç§’æ›´æ–°é¢œè‰²
			setInterval(applyRandomColors, 1000);



			//æ–‡æœ¬æ‰“å­—æœºæ•ˆæœ
			var typed = new Typed(".typing", {
				//è¾“å‡ºçš„æ–‡å­—ï¼Œé€šè¿‡è½¬ä¹‰å­—ç¬¦ ^3000 åœ¨å­—ç¬¦ä¸²ä¸­é—´æš‚åœä¸€æ®µæ—¶é—´
				strings: ['haloï¼Œæœ‹å‹ã€‚æ¬¢è¿è®¿é—®å°é¾™ğŸ‰çš„èµ„æºç«™ï¼^3000', 'æœ¬ç«™çƒ­è¡·äºåˆ†äº«å®‰å…¨ï¼Œæ— æ¯’ï¼Œæ— åé—¨ï¼Œå¯é å¯ç”¨çš„å„ç±»èµ„æºã€‚^3000'],
				typeSpeed: 60, //æ‰“å­—çš„é€Ÿåº¦
				smartBackspace: true, //å¼€å¯æ™ºèƒ½é€€æ ¼ é»˜è®¤false
				cursorChar: '_', //è‡ªå®šä¹‰å…‰æ ‡ç¬¦å·
				backSpeed: 50, //åé€€é€Ÿåº¦
				backDelay: 500, //åé€€å»¶è¿Ÿ
				loop: true, //æ˜¯å¦å¾ªç¯ é»˜è®¤false
				startDelay: 1000, //èµ·å§‹æ—¶é—´
				fadeOut: true //æ·¡å‡ºæ•ˆæœ		
			});



			// ç½‘ç«™è¿è¡Œæ—¶é—´
			const startTime = new Date("2022-08-09T00:00:00"); // è®¾ç½®å»ºç«™æ—¶é—´
			// æ›´æ–°è¿è¡Œæ—¶é—´çš„å‡½æ•°
			function updateUptime() {
				const now = new Date();
				const uptime = now - startTime; // è¿è¡Œæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
				// å°†æ¯«ç§’è½¬æ¢ä¸ºå¤©ã€å°æ—¶ã€åˆ†é’Ÿã€ç§’
				const days = Math.floor(uptime / (1000 * 60 * 60 * 24));
				const hours = Math.floor((uptime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
				const minutes = Math.floor((uptime % (1000 * 60 * 60)) / (1000 * 60));
				const seconds = Math.floor((uptime % (1000 * 60)) / 1000);
				// æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤ºï¼Œç¾åŒ–è¾“å‡ºï¼Œæ·»åŠ é›¶å‰å¯¼
				const uptimeString = `ç½‘ç«™å·²è¿è¡Œæ—¶é—´ï¼š${pad(days)} å¤© ${pad(hours)} æ—¶ ${pad(minutes)} åˆ† ${pad(seconds)} ç§’`;
				// å°†è¿è¡Œæ—¶é—´æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
				document.getElementById("uptime").textContent = uptimeString;
			}
			// è¾…åŠ©å‡½æ•°ï¼Œç”¨äºæ·»åŠ é›¶å‰å¯¼
			function pad(number) {
				return number.toString().padStart(2, '0');
			}
			// æ¯ç§’è°ƒç”¨ä¸€æ¬¡updateUptimeå‡½æ•°
			setInterval(updateUptime, 1000);



			//Hitokotoä¸€è¨€
			function fetchHitokoto(url) {
				return fetch(url).then(response => {
					if (!response.ok) {
						throw new Error(`Network response was not ok: ${response.statusText}`);
					}
					return response.json();
				}).catch(error => {
					console.error(`Failed to fetch from ${url}:`, error);
					throw error; // Re-throw the error to be handled by the caller
				});
			}

			function updateHitokotoElement(data) {
				const hitokotoElement = document.getElementById('hitokoto_text');
				if (!hitokotoElement) {
					console.error('The hitokoto_text element does not exist.');
					return;
				}
				let formattedText = `ã€${data.hitokoto}ã€ â€”â€” `;
				if (data.from_who) {
					formattedText += `${data.from_who}ã€${data.from}ã€‘`;
				} else {
					formattedText += `ã€${data.from}ã€‘`;
				}
				hitokotoElement.textContent = formattedText;
			}

			function updateHitokoto() {
				fetchHitokoto('https://v1.hitokoto.cn').then(updateHitokotoElement).catch(() => {
					// Try the international endpoint if the first request fails
					return fetchHitokoto('https://international.v1.hitokoto.cn').then(updateHitokotoElement).catch(
						() => {
							document.getElementById('hitokoto_text').textContent = 'Failed to load Hitokoto.';
						});
				});
			}
			// Set interval to update hitokoto every 10 seconds
			setInterval(updateHitokoto, 10000);
		</script>



		<script>
			// åŠ¨æ€ç”Ÿæˆ ç³»ç»Ÿé•œåƒ å†…å®¹
			fetch(
					'https://fastly.jsdelivr.net/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/json/windows_iso_20240917121439.json'
				)
				.then(response => {
					if (!response.ok) {
						throw new Error('Network response was not ok');
					}
					return response.json();
				})
				.then(data => {
					// åˆå§‹åŒ–è¡¨æ ¼
					layui.use(['table', 'layer'], function() {
						var table = layui.table;
						var layer = layui.layer;

						// è¡¨æ ¼æ¸²æŸ“
						table.render({
							elem: '#tableContainer',
							cols: [
								[{
										field: 'id',
										title: 'ID'
									},
									{
										field: 'name',
										title: 'åç§°'
									},
									{
										field: 'fileName',
										title: 'æ–‡ä»¶å'
									},
									{
										field: 'date',
										title: 'æ—¥æœŸ'
									},
									{
										field: 'ED2K',
										title: 'ED2K',
										templet: function(d) {
											if (d.ED2K === 'æ— ') {
												return 'æ— ';
											}
											return `<button type="button" class="layui-btn layui-btn-sm layui-btn-normal" onclick="copyText('${d.ED2K}')">å¤åˆ¶</button>`;
										}
									},
									{
										field: 'BT',
										title: 'BT',
										templet: function(d) {
											if (d.BT === 'æ— ') {
												return 'æ— ';
											}
											return `<button type="button" class="layui-btn layui-btn-sm layui-btn-normal" onclick="copyText('${d.BT}')">å¤åˆ¶</button>`;
										}
									}
								]
							],
							data: formatData(data),
							page: true
						});
					});
				})
				.catch(error => {
					layer.msg('åŠ è½½æ•°æ®å¤±è´¥ï¼š' + error.message, {
						icon: 2
					});
				});

			// æ ¼å¼åŒ–æ•°æ®ä»¥é€‚åº”è¡¨æ ¼
			function formatData(data) {
				var formattedData = [];
				data.forEach(function(os) {
					os.file.forEach(function(file) {
						formattedData.push({
							id: os.id,
							name: os.name,
							fileName: file.fileName,
							date: file.date,
							ED2K: file.ED2K,
							BT: file.BT
						});
					});
				});
				return formattedData;
			}

			// å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿
			function copyText(text) {
				var textarea = document.createElement("textarea");
				textarea.value = text;
				document.body.appendChild(textarea);
				textarea.select();
				document.execCommand("copy");
				document.body.removeChild(textarea);
				layui.layer.msg('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', {
					icon: 1
				});
			}
		</script>
	</body>
</html>
