<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8">
		<link rel="dns-prefetch" href="https://github.githubassets.com">
		<link rel="dns-prefetch" href="https://avatars.githubusercontent.com">
		<link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
		<link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">
		<link rel="preconnect" href="https://github.githubassets.com" crossorigin>
		<link rel="preconnect" href="https://avatars.githubusercontent.com">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap"
			rel="stylesheet">
		<link rel="stylesheet" href="https://jsdelivr.pai233.top/npm/font-awesome/css/font-awesome.min.css" />
		<title>糖糖π的导航</title>
		<style>
			/* CSS样式 */
			body,
			ul,
			li,
			h1,
			h2,
			a,
			input {
				margin: 0;
				padding: 0;
				text-decoration: none;
				list-style: none;
				box-sizing: border-box;
			}

			body {
				font-family: 'Open Sans', sans-serif;
				background: url('https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/bg.img') no-repeat center center fixed;
				background-size: cover;
				color: #333;
				margin: 0 auto;
				padding: 20px;
				overflow: hidden;
				cursor: url(https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/cursor.cur), default;
			}

			header,
			main,
			footer {
				width: 100%;
				max-width: 1200px;
				margin: 0 auto;
				padding: 20px;
				box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
				background-color: rgba(255, 255, 255, 0.9);
				border-radius: 8px;
			}

			.time-date-week {
				font-size: 18px;
				text-align: center;
				margin-bottom: 10px;
			}

			h1 {
				color: #333;
				text-align: center;
				margin-bottom: 5px;
			}

			h2 {
				color: #555;
				font-size: 18px;
				font-style: italic;
				text-align: center;
				margin-bottom: 20px;
			}

			#searchBox {
				width: 100%;
				max-width: 500px;
				height: 40px;
				padding: 10px;
				font-size: 16px;
				margin: 0 auto 20px;
				display: block;
				border: 1px solid #ddd;
				border-radius: 4px;
				box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
				transition: border-color 0.3s ease, box-shadow 0.3s ease;
				cursor: url(https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/cursor.cur), default;
			}

			#searchBox:focus {
				border-color: #007bff;
				box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
			}

			#loading {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(255, 255, 255, 0.9);
				background-image: url('https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/loading.gif');
				background-repeat: no-repeat;
				background-position: center center;
				z-index: 1000;
			}

			.category-list,
			.link-list {
				height: 300px;
				overflow-y: auto;
				border: 1px solid #ddd;
				border-radius: 4px;
				margin-bottom: 20px;
				padding: 10px;
			}

			.category-list li,
			.link-list li {
				padding: 8px;
				border-bottom: 1px solid #eee;
				cursor: pointer;
				transition: background-color 0.3s ease;
				cursor: url(https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/cursor.cur), default;
			}

			.category-list li:hover {
				background-color: #FFD700;
				color: #FFFFFF;
				cursor: url(https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/cursor.cur), default;
			}

			.category-list li.active {
				background-color: #007bff;
				color: #fff;
			}

			.link-list li:hover {
				background-color: #FFD700;
				color: #FFFFFF;
				cursor: url(https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/cursor.cur), default;
			}

			.link-list li:hover a {
				color: #FFFFFF;
				text-decoration: none;
				cursor: url(https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/cursor.cur), default;
			}

			footer {
				text-align: center;
				margin-top: 20px;
			}

			footer a {
				cursor: url(https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/pictures/cursor.cur), default;
			}

			.separator {
				margin: 0 10px;
				/* 添加分隔符的间距 */
			}

			.tail {
				position: fixed;
				font-size: 20px;
				color: #fff;
				opacity: 0.5;
				pointer-events: none;
				transition: opacity 0.5s ease-out;
			}

			@media (max-width: 768px) {

				header,
				main,
				footer {
					padding: 10px;
				}

				h1 {
					font-size: 24px;
				}

				h2 {
					font-size: 16px;
				}

				.category-list,
				.link-list {
					height: auto;
					max-height: 200px;
				}
			}
		</style>
	</head>
	<body>
		<div id="loading"></div>
		<header>
			<h1 id="timeDateWeek"></h1>
			<h1>糖糖π的导航</h1>
			<h2>——热衷于分享安全，无毒，无后门，可靠可用的各类资源。</h2>
			<input type="text" id="searchBox" placeholder="搜索资源...">
		</header>
		<main>
			<div style="display: flex; flex-wrap: wrap; justify-content: space-between;">
				<ul class="category-list" id="categoryList"></ul>
				<ul class="link-list" id="linkList"></ul>
			</div>
		</main>
		<footer>
			<p>Copyright © 2024 刘小龙</p>
			<p>网站托管提供商 <a target="_blank" href="https://pages.github.com/">GitHub</a></p>
			<div id="social-values">
				<!-- 社会主义核心价值观24字，每四个词后添加竖线 -->
				<span class="social-value">富强</span>
				<span class="social-value">民主</span>
				<span class="social-value">文明</span>
				<span class="social-value">和谐</span>
				<span class="separator">|</span>
				<span class="social-value">自由</span>
				<span class="social-value">平等</span>
				<span class="social-value">公正</span>
				<span class="social-value">法治</span>
				<span class="separator">|</span>
				<span class="social-value">爱国</span>
				<span class="social-value">敬业</span>
				<span class="social-value">诚信</span>
				<span class="social-value">友善</span>
			</div>
			<p id="uptime"></p>
		</footer>
		<script src="https://jsdelivr.pai233.top/npm/jquery/dist/jquery.min.js"></script>
		<script src="https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/js/autoload.js"></script>
		<script src="https://jsdelivr.pai233.top/gh/Fuukei/Public_Repository@latest/static/js/sakura-less.js"></script>
		<script
			src="https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/js/displayHitokoto_20240731181957.js">
		</script>
		<script src="https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/js/getRandomColor.js">
		</script>
		<script>
			function updateTime() {
				const now = new Date();
				const year = now.getFullYear();
				const month = now.getMonth() + 1;
				const day = now.getDate();
				const hour = now.getHours();
				const minute = now.getMinutes();
				const second = now.getSeconds();
				const week = ['日', '一', '二', '三', '四', '五', '六'][now.getDay()];
				$('#timeDateWeek').text(
					`${year}年${month.toString().padStart(2, '0')}月${day.toString().padStart(2, '0')}日🔶${hour.toString().padStart(2, '0')}时${minute.toString().padStart(2, '0')}分${second.toString().padStart(2, '0')}秒🔶星期${week}`
				);
			}
			setInterval(updateTime, 1000);
			updateTime();

			let categories = [];
			let selectedCategory = null;
			let showNoResultsMessage = false;

			function displayCategories() {
				$('#categoryList').empty();
				categories.forEach((category, index) => {
					const isActive = selectedCategory && category.name === selectedCategory.name;
					$('#categoryList').append(`<li class="${isActive ? 'active' : ''}">${category.name}</li>`);
				});
				$('#categoryList li').click(function() {
					// 移除所有li标签的active类
					$('#categoryList li').removeClass('active');
					// 为当前点击的li标签添加active类
					$(this).addClass('active');

					selectedCategory = categories.find(cat => cat.name === $(this).text());
					displayLinks();
					showNoResultsMessage = false;
				});
			}

			function displayLinks() {
				$('#linkList').empty();
				if (selectedCategory) {
					selectedCategory.links.forEach(link => {
						$('#linkList').append(`<li><a href="${link.url}" target="_blank">${link.name}</a></li>`);
					});
				}
				if (showNoResultsMessage) {
					$('#linkList').append('<li>没有找到与之相匹配的结果！</li>');
				}
			}

			$('#searchBox').on('input', function() {
				const searchTerm = $(this).val().toLowerCase();
				if (searchTerm) {
					const filteredLinks = categories.flatMap(category => category.links.filter(link => link.name
						.toLowerCase().includes(searchTerm)));
					if (filteredLinks.length > 0) {
						$('#linkList').empty();
						filteredLinks.forEach(link => {
							$('#linkList').append(
								`<li><a href="${link.url}" target="_blank">${link.name}</a></li>`);
						});
						showNoResultsMessage = false;
					} else {
						showNoResultsMessage = true;
						displayLinks();
					}
				} else {
					displayLinks();
				}
			});

			$(document).ready(function() {
				$('#loading').show();
				$.ajax({
					url: 'https://jsdelivr.pai233.top/gh/lxl-xiaolong/lxl-xiaolong.github.io@master/json/links_20240729095108.json',
					type: 'GET',
					dataType: 'json',
					success: function(data) {
						categories = data;
						selectedCategory = categories[0];
						displayCategories();
						displayLinks();
						// 默认选中第一个分类
						$('#categoryList li').first().click();
						$('#loading').hide();
					},
					error: function() {
						$('#loading').hide();
						alert('Failed to load data.');
					}
				});
			});

			function applyRandomColors() {
				var values = document.getElementsByClassName('social-value');
				for (var i = 0; i < values.length; i++) {
					values[i].style.color = getRandomColor();
				}
			}

			// 设置定时器，每秒更新颜色
			setInterval(applyRandomColors, 1000);

			// 设置建站时间
			const startTime = new Date("2022-08-09T00:00:00");

			// 更新运行时间的函数
			function updateUptime() {
				const now = new Date();
				const uptime = now - startTime; // 运行时间（毫秒）

				// 将毫秒转换为天、小时、分钟、秒
				const days = Math.floor(uptime / (1000 * 60 * 60 * 24));
				const hours = Math.floor((uptime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
				const minutes = Math.floor((uptime % (1000 * 60 * 60)) / (1000 * 60));
				const seconds = Math.floor((uptime % (1000 * 60)) / 1000);

				// 格式化时间显示，美化输出，添加零前导
				const uptimeString = `网站已运行时间：${pad(days)} 天${pad(hours)} 时 ${pad(minutes)} 分${pad(seconds)} 秒`;

				// 将运行时间显示在页面上
				document.getElementById("uptime").textContent = uptimeString;
			}

			// 辅助函数，用于添加零前导
			function pad(number) {
				return number.toString().padStart(2, '0');
			}

			// 每秒调用一次updateUptime函数
			setInterval(updateUptime, 1000);

			// 鼠标拖尾特效
			const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
			const tails = [];
			const positions = [];

			// 创建26个字母拖尾
			for (let i = 0; i < alphabet.length; i++) {
				const tail = document.createElement('div');
				tail.className = 'tail';
				tail.textContent = alphabet[i];
				document.body.appendChild(tail);
				tails.push(tail);
				positions.push({
					x: 0,
					y: 0
				}); // 初始化位置数组
			}

			function shuffleArray(array) {
				// 使用Fisher-Yates洗牌算法打乱数组
				for (let i = array.length - 1; i > 0; i--) {
					const j = Math.floor(Math.random() * (i + 1));
					[array[i], array[j]] = [array[j], array[i]];
				}
			}

			function updateTails(x, y) {
				// 更新最新鼠标位置
				positions[0] = {
					x,
					y
				};

				// 打乱字母位置
				shuffleArray(positions);

				// 更新字母拖尾的位置和透明度
				tails.forEach((tail, index) => {
					const {
						x,
						y
					} = positions[index];
					tail.style.left = `${x}px`;
					tail.style.top = `${y}px`;
					tail.style.color = getRandomColor();
					tail.style.opacity = 1 - (index / alphabet.length);
				});
			}

			function fadeOutTails() {
				tails.forEach((tail, index) => {
					const currentOpacity = parseFloat(tail.style.opacity);
					tail.style.opacity = Math.max(currentOpacity - 0.05, 0); // 增加每次递减的透明度
				});
			}

			let fadeOutInterval;

			document.addEventListener('mousemove', ({
				clientX,
				clientY
			}) => {
				updateTails(clientX, clientY);
				// 重置渐隐定时器
				clearInterval(fadeOutInterval);
				fadeOutInterval = setInterval(fadeOutTails, 25); // 减少定时器时间间隔
			});

			// 鼠标停止移动时开始渐隐
			document.addEventListener('mouseout', () => {
				clearInterval(fadeOutInterval);
				fadeOutInterval = setInterval(fadeOutTails, 25); // 减少定时器时间间隔
			});
		</script>
	</body>
</html>